import{_ as o,W as r,X as t,Y as n,Z as e,$ as a,a1 as i,C as c}from"./framework-68a75bb9.js";const l="/images/2021-04-28_19-13.png",d="/images/2021-04-28_19-21.png",p="/images/2021-04-28_22-49.png",u="/images/2021-04-28_22-52.png",m="/images/2021-04-28_22-58.png",v="/images/2021-04-29_00-25.png",b="/images/2021-04-29_00-28.png",g="/images/2021-04-28_21-21.png",_="/images/2021-04-29_00-37.png",h={},f=n("h1",{id:"从zerotier-one安装与配置到android-manjaro连接共享控制的一条龙服务问题",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#从zerotier-one安装与配置到android-manjaro连接共享控制的一条龙服务问题","aria-hidden":"true"},"#"),e(" 从Zerotier One安装与配置到Android & Manjaro连接共享控制的一条龙服务问题")],-1),k=n("h2",{id:"zerotier-one安装与配置",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#zerotier-one安装与配置","aria-hidden":"true"},"#"),e(" Zerotier One安装与配置")],-1),x=n("p",null,"ZerotierOne是一种内网穿透工具，它的基本原理是通过搭建虚拟内网来连接各设备。为什么会提到连接共享控制的问题？此类的连接共享以及控制，多都是在内网上实现的，这样说你多少该懂了。。。",-1),z=n("blockquote",null,[n("p",null,"「注」：网上与此相关的资料太少了，我觉得很有必要详细记录下来，因此本文看起来繁琐了一些。")],-1),w={href:"https://www.zerotier.com/",target:"_blank",rel:"noopener noreferrer"},N=i('<figure><img src="'+l+'" alt="2021-04-28_19-13" tabindex="0" loading="lazy"><figcaption>2021-04-28_19-13</figcaption></figure><p>点击创建网络按钮，即可自动生成新的一栏，这时候你需要点击进去即可</p><figure><img src="'+d+'" alt="2021-04-28_19-21" tabindex="0" loading="lazy"><figcaption>2021-04-28_19-21</figcaption></figure><p><strong>IPv4 Auto-Assign</strong>那一栏选什么地址不用我说，随君喜好！Zerotier One就是可以自己定IP地址！</p><p><strong>IPv6 Auto-Assign</strong>那一栏选中第二项即可。</p><p>往下翻页你会看到这个：</p><figure><img src="'+p+'" alt="2021-04-28_22-49" tabindex="0" loading="lazy"><figcaption>2021-04-28_22-49</figcaption></figure><p>这里提示可以添加网络成员，但是需要相应设备安装对应的客户端。</p><figure><img src="'+u+`" alt="2021-04-28_22-52" tabindex="0" loading="lazy"><figcaption>2021-04-28_22-52</figcaption></figure><p>由于我使用的是基于Archlinux的系统，因此从AUR安装即可：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yay <span class="token parameter variable">-S</span> zerotier-one
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装之后，需要启动服务，执行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start zerotier-one.service
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> zerotier-one.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>我见网上很多博客写的这个指令：<code>curl -s https://install.zerotier.com | sudo bash</code>，但至少在Manjaro里是不能正常执行的，会提示如下的报错信息——找不到与系统版本匹配的客户端。</p><figure><img src="`+m+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>根据<code>sudo zerotier-one -h</code>的返回结果可知，需要接着输入如下指令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> zerotier-one <span class="token parameter variable">-pdiq</span>
<span class="token comment"># 如果等了半天没有反应，就终止一下吧。。。我当初就这样做的，实质上执行</span>
<span class="token comment"># 这个只是为了生成相应的配置文件来解决先前执行下一个指令报的错误——找不到配置文件。</span>
<span class="token function">sudo</span> zerotier-cli status
<span class="token comment"># 返回200 info *** 1.6.4 ONLINE则正常。</span>
<span class="token function">sudo</span> zerotier-listpeers
<span class="token comment"># 用于获取当前的连接情况，不执行也可</span>
<span class="token function">sudo</span> zerotier-cli <span class="token function">join</span> ******
<span class="token comment"># 这里的******就是前面特意强调的虚拟内网ID</span>
<span class="token function">sudo</span> zerotier-listpeers
<span class="token comment"># 确认一下确实成功了，你会看到比原先多出来一行内容，而且最后一个单词是LEAF，其它</span>
<span class="token comment"># 行最后的单词都是PLANET。</span>
<span class="token function">sudo</span> systemctl start zerotier-one.service
<span class="token comment"># 启用zerotier-one服务</span>
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> zerotier-one.service
<span class="token comment"># 开机自启动zerotier-one服务</span>
<span class="token comment">######</span>
<span class="token function">sudo</span> zerotier-cli <span class="token builtin class-name">set</span> 12ac4a1e7101bb86 <span class="token assign-left variable">allowManaged</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment"># 注意，关于这条指令网上有两种声音，有主张授权为1的，但没见到谁有给理由，而主张授</span>
<span class="token comment"># 权为0的理由如下：</span>
<span class="token comment"># 这样就不会导致勾选Authorized后，zerotier自动将路由下发到ubuntu，如果</span>
<span class="token comment"># zerotier设置的路由为10.0.1.0/24,会导致本来10.0.1.0/24 dev br-lan</span>
<span class="token comment"># 变成10.0.1.0/24 dev ztxxxxxxxxx,然后你就不能连接路由器了</span>
<span class="token comment"># 作者：fc790 https://www.bilibili.com/read/cv7586063/ 出处： bilibili</span>
<span class="token comment">## 这种就看着弄，出了问题再改回来就好了。</span>
<span class="token function">sudo</span> systemctl restart zerotier-one
<span class="token comment"># 如果你做了刚才那个做法，需要重启一下服务。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>到此为止，电脑上的ZeroTier One就已经配置得差不多了，我们需要在Android设备上安装客户端了。</p><p>如果你有Google Play并且你还能使用，你可以直接在Google商店上下载。但不幸的是，如果你没有，你可以选择去安装，而更不幸的是，你使用的是华为产品，那恭喜恭喜，您跟我一样，没什么可能走这条路了（毕竟国际形势如此紧张。。。也没办法。。。）</p>`,19),A={href:"https://apkpure.com/",target:"_blank",rel:"noopener noreferrer"},y=i('<p>装好Zerotier One之后，需要新建一个连接配置，点击ADD NETWORK，然后输入虚拟内网ID，完成后点击下方的Add Network，并开启连接，这时候你需要回到电脑上的Zerotier Central，翻到Members这一栏刷新一下，你会发现多出来一个成员，这里需要你点前面的复选框来授权连接（你也可以选择删除或者断开连接并忽略）。然后就可以自己给设备设定名字以及备注了。</p><figure><img src="'+v+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>然而如果你希望这台设备能被内网的其它设备发现，需要先后点击这两处：</p><figure><img src="'+b+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>大致上如此，这时候你已经搭建好这个虚拟内网了！</p><p>如果希望某设备（已知Node ID，在客户端下方一栏出现）也能加入这个虚拟内网，需要在Zerotier Central找到<img src="'+g+'" alt="" loading="lazy">这里并输入对应设备的Node ID。</p><p>另外特意说一下如果希望本机也加入的话，获取Node ID这个问题折磨我好久，最后查到官方文档给的：</p><figure><img src="'+_+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>我才到终端输入<code>cat /var/lib/zerotier-one/identity.public</code>，来查看节点信息的（写这篇报告之前是这样做的）然而当我写到刚刚那个安装指令的时候，我才发现，有个最简单的方法：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> zerotier-cli status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>返回的200 info后面那个就是本机Node ID。。。谁叫我当时不知道呢。。。</p><blockquote><p>不过不算白费努力，咱该明白遇到问题相对要好的解决办法其实是去翻一翻官方文档，尤其是当你发现相关资料特别少的时候。这会让你节省不少力气和时间。</p></blockquote><h2 id="android-arch-linux连接共享控制" tabindex="-1"><a class="header-anchor" href="#android-arch-linux连接共享控制" aria-hidden="true">#</a> Android &amp; Arch Linux连接共享控制</h2><h3 id="vnc远程控制" tabindex="-1"><a class="header-anchor" href="#vnc远程控制" aria-hidden="true">#</a> VNC远程控制</h3>`,14),I={href:"https://www.realvnc.com/en/connect/download/vnc/",target:"_blank",rel:"noopener noreferrer"},V={href:"https://www.realvnc.com/en/connect/download/viewer/",target:"_blank",rel:"noopener noreferrer"},Z=i(`<p>注意两个我是都选了Generic script x64版本，如果你非常清楚应该如何做的话请自行选择。</p><p>下载来的这两个压缩包可以解压到指定文件夹，然后从终端这里分别cd到这两个目录。</p><p>首先说VNC Server：到这个目录下之后执行</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> ./vncinstall
<span class="token function">sudo</span> vnclicense <span class="token parameter variable">-add</span> 3TH6P-DV5AE-BLHY6-PNENS-B3AQA
vncserver :1
<span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> vnc <span class="token comment"># 查看进程，如果能正常显示vnc进程的话即是安装成功。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接下来再说VNC Viewer：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> ./vncinstall
<span class="token builtin class-name">cd</span> /usr/bin
./vncviewer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这时候弹出窗口，按照要求安装即可正常使用。</p><p>***不过得先有账号。。。***注册并登录账号之后就可以添加网络配置了，填入的IP地址应该是你要连接的设备所在的Zerotier One这里的IP地址（不是物理IP地址）。输入主机的用户名和密码，保存后就可以正常连接主机咯。</p>`,8);function O(P,C){const s=c("ExternalLinkIcon");return r(),t("div",null,[f,k,x,z,n("p",null,[e("首先在"),n("a",w,[e("Zerotier-One官网"),a(s)]),e("上注册一个帐号，我选择了使用GitHub登陆。登陆之后会出现这个界面：")]),N,n("p",null,[e("走的另一条路在此-->"),n("a",A,[e("ApkPure"),a(s)]),e("，在这家网站上你可以下载到许许多多好用实用的外国软件，干净、安全、可靠，我是被吸引着主动下载了他们的客户端，真香了。。。")]),y,n("p",null,[e("安装好虚拟内网了，我们要开始Android & Manjaro连接共享控制了，经过我长时间的搜索与实践，最终选择的还是VNC Viewer。安装网址："),n("a",I,[e("VNC Server"),a(s)]),e(),n("a",V,[e("VNC Viewer"),a(s)])]),Z])}const E=o(h,[["render",O],["__file","ZeroTier-One安装与使用.html.vue"]]);export{E as default};
