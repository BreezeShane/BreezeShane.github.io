(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{862:function(s,a,e){"use strict";e.r(a);var t=e(1),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),e("p",[s._v("在做项目的我正为自己的显卡太小跑不了预测而发愁的时候，由于非常微妙的缘分，我白嫖到一个装有GeForce GTX 1060显卡的主机，更令人高兴的是这个主机装上的系统就是Manjaro！")]),s._v(" "),e("h2",{attrs:{id:"怎么做"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#怎么做"}},[s._v("#")]),s._v(" 怎么做？")]),s._v(" "),e("p",[s._v("这个系统已经基本把绝大多数事都做好了，因此我们只需要做一点点工作就行。首先要明确一点：这个主机是用作服务器的，不作日常使用。")]),s._v(" "),e("h3",{attrs:{id:"前期工作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前期工作"}},[s._v("#")]),s._v(" 前期工作")]),s._v(" "),e("p",[s._v("由于这个系统有较长时间没有使用，因此需要像刚安装好系统那样做一切前期准备，详细步骤请阅读我之前的"),e("RouterLink",{attrs:{to:"/Linux/Manjaro安装与配置.html"}},[s._v("文章")]),s._v("。")],1),s._v(" "),e("h3",{attrs:{id:"搭建虚拟内网"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搭建虚拟内网"}},[s._v("#")]),s._v(" 搭建虚拟内网")]),s._v(" "),e("p",[s._v("为了能在各地自由使用，我决定使用ZeroTier-One来构建一个虚拟内网，然后将我目前使用的两个设备jion到同一个内网即可。服务器上只消执行：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pacman -S zerotier-one\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" zerotier-one.service\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start zerotier-one.service\nzerotier-cli "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("YOUR_NETWORK_ID"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("这样就可以搭建好一个虚拟内网了。")]),s._v(" "),e("h3",{attrs:{id:"建立ssh连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#建立ssh连接"}},[s._v("#")]),s._v(" 建立SSH连接")]),s._v(" "),e("p",[s._v("做好上一步之后，可以根据情况自己设定好IP「更具体的内容请移步至"),e("RouterLink",{attrs:{to:"/Linux/ZeroTier-One安装与使用.html"}},[s._v("这篇文章")]),s._v("」，需要记好服务器的IP，并且编辑SSH配置文件：")],1),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/ssh_config\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("需要将"),e("code",[s._v("Port 22")]),s._v("前的#去掉，当然如果你愿意也可以直接修改Port后面的值。")]),s._v(" "),e("p",[s._v("保存后需要重启一下服务，执行：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" restart sshd.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("但为了保证开机就能使用SSH，还需要执行：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" sshd.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("最后你就可以执行：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" USERNAME@IP\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("来远程连接服务器了。")]),s._v(" "),e("p",[s._v("但这里要注意的是，如果前面你设定的port不是默认值22，则需要使用p参数，即执行：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -p YOUR_PORT USERNAME@IP\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"关闭图形桌面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭图形桌面"}},[s._v("#")]),s._v(" 关闭图形桌面")]),s._v(" "),e("p",[s._v("因为我不喜欢总是去插拔鼠标接收器来在两台电脑之间使用，而且服务器我也是只可能使用命令行形式，而最重要的原因是它打开的图形桌面Xorg服务是要占用显卡的，这个就阻挠了我进一步的安装驱动，于是我执行了如下指令来关掉这个多余的东西：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl set-default multi-user.target\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("这样你就可以开机就进入命令行模式了，其实就是tty模式。")]),s._v(" "),e("p",[s._v("如果你有一天想用回这个桌面系统，那就执行：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl set-default graphics.target\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"安装nvidia驱动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装nvidia驱动"}},[s._v("#")]),s._v(" 安装Nvidia驱动")]),s._v(" "),e("p",[s._v("依旧根据"),e("code",[s._v("inxi -G")]),s._v("给出的显卡信息到Nvidia官网选择合适的驱动程序下载过来，然后用"),e("code",[s._v("sudo bash NVIDIA…….sh")]),s._v("即可。")]),s._v(" "),e("p",[s._v("但要注意的是如果安装失败并报错提示缺少kernel的话，你需要根据系统内核版本来安装linux-headers，查看系统版本的方法有三个：一是执行"),e("code",[s._v("username -a")]),s._v("来查看内核版本；二是执行"),e("code",[s._v("neofetch")]),s._v("，不过这个需要提前安装好neofetch才行；三则是直接运行系统自带的"),e("code",[s._v("screenfetch")]),s._v("，因此本人最推荐这个方法，当然第一个方法非常简洁，也足够使用。如你所见，Kernel后跟的数字就意味着你要安装的linux-headers的版本，比如我的就是"),e("code",[s._v("5.11.22-2-MANJARO")]),s._v("，那我就要安装linux510-headers，为什么不是511，因为没有啊～安装好Kernel Headers之后再重新安装显卡，就万事大吉了。")]),s._v(" "),e("h3",{attrs:{id:"安装cuda系列"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装cuda系列"}},[s._v("#")]),s._v(" 安装cuda系列")]),s._v(" "),e("p",[s._v("安装之前一定要检查一下你的系统驱动版本是否与你将要安装的cuda版本匹配，由于我这里的版本是470.63.01，对应应该装的CUDA版本要高于11.2（包括11.2）。而我这恰好一切都满足，就很顺利，执行一个语句即可：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pacman -S cuda cuda-tools cudnn\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"结束"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#结束"}},[s._v("#")]),s._v(" 结束")]),s._v(" "),e("p",[s._v("现在你的服务器已经搭好了，一切都可以正常使用咯～")])])}),[],!1,null,null,null);a.default=n.exports}}]);