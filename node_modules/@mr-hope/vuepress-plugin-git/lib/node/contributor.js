"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getContributors = void 0;
const path_1 = require("path");
const execa = require("execa");
const getContributors = async (filePath) => {
    const { stdout } = await execa("git", ["--no-pager", "shortlog", "-nes", "--", path_1.basename(filePath)], {
        cwd: path_1.dirname(filePath),
        stdin: "inherit",
    });
    return stdout
        .split("\n")
        .map((item) => /^(\d+)\t(.*) <(.*)>$/u.exec(item.trim()))
        .filter((item) => item !== null)
        .map(([, commits, name, email]) => ({
        name,
        email,
        commits: Number.parseInt(commits, 10),
    }));
};
exports.getContributors = getContributors;
//# sourceMappingURL=contributor.js.map