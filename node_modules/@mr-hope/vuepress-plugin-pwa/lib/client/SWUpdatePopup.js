import Vue from "vue";
import { i18n } from "./define";
import { event } from "./event";
export default Vue.extend({
    name: "SWUpdatePopup",
    data: () => ({
        updateEvent: null,
    }),
    computed: {
        enabled() {
            return Boolean(this.updateEvent);
        },
        message() {
            return i18n[this.$localePath || "/"].update;
        },
    },
    created() {
        event.$on("sw-updated", this.onSWUpdated.bind(this));
    },
    methods: {
        onSWUpdated(updateEvent) {
            this.updateEvent = updateEvent;
        },
        reload() {
            if (this.updateEvent)
                void this.updateEvent.skipWaiting().then(() => {
                    location.reload(true);
                    this.updateEvent = null;
                });
        },
    },
});
//# sourceMappingURL=SWUpdatePopup.js.map